# **NodeJS**

## ğŸ”· LÃ½ thuyáº¿t cÆ¡ sá»Ÿ

### NodeJS
- **NodeJS** lÃ  má»™t ná»n táº£ng (Platform) phÃ¡t triá»ƒn Ä‘á»™c láº­p Ä‘Æ°á»£c xÃ¢y dá»±ng á»Ÿ trÃªn JS Runtime cá»§a Chrome mÃ  chÃºng ta cÃ³ thá»ƒ xÃ¢y dá»±ng Ä‘Æ°á»£c cÃ¡c á»©ng dá»¥ng máº¡ng má»™t cÃ¡ch nhanh chÃ³ng vÃ  dá»… dÃ ng má»Ÿ rá»™ng.
- á»¨ng dá»¥ng NodeJS cháº¡y trong má»™t quy trÃ¬nh duy nháº¥t mÃ  khÃ´ng táº¡o chuá»—i má»›i cho má»i yÃªu cáº§u, nÃ³ cung cáº¥p má»™t táº­p há»£p cÃ¡c nguyÃªn hÃ m I/O báº¥t Ä‘á»“ng bá»™ trong thÆ° viá»‡n tiÃªu chuáº©n cá»§a nÃ³ Ä‘á»ƒ ngÄƒn mÃ£ JavaScript cháº·n vÃ  nÃ³i chung, cÃ¡c thÆ° viá»‡n trong Node.js Ä‘Æ°á»£c viáº¿t báº±ng cÃ¡ch sá»­ dá»¥ng mÃ´ hÃ¬nh khÃ´ng cháº·n, khiáº¿n hÃ nh vi cháº·n trá»Ÿ thÃ nh ngoáº¡i lá»‡ thay vÃ¬ chuáº©n má»±c.
- Pháº§n Core bÃªn dÆ°á»›i cá»§a NodeJS Ä‘Æ°á»£c viáº¿t háº§u háº¿t báº±ng C++ nÃªn cho tá»‘c Ä‘á»™ xá»­ lÃ½ vÃ  hiá»‡u nÄƒng khÃ¡ cao.
- NodeJS Ã¡p dá»¥ng cho cÃ¡c sáº£n pháº©m cÃ³ lÆ°á»£ng truy cáº­p lá»›n, cáº§n má»Ÿ rá»™ng nhanh, cáº§n Ä‘á»•i má»›i cÃ´ng nghá»‡, cÃ³ thá»ƒ táº¡o ra Ä‘Æ°á»£c cÃ¡c á»©ng dá»¥ng cÃ³ tá»‘c Ä‘á»™ xá»­ lÃ½ nhanh, realtime thá»i gian thá»±c..

### REPL (Real - Eval - Print - Loop)
- LÃ  má»™t Ä‘áº·c tÃ­nh cá»§a NodeJS cho phÃ©p láº­p trÃ¬nh viÃªn viáº¿t code  vÃ  cháº¡y trá»±c tiáº¿p trÃªn mÃ n hÃ¬nh shell/console/terminal Ä‘á»ƒ debug, kiá»ƒm tra code mÃ  khÃ´ng cáº§n táº¡o ra báº¥t cá»© file hay folder nÃ o.

- Khi gÃµ code JS lÃªn mÃ n hÃ¬nh shell, NodeJS sáº½ thá»±c hiá»‡n viá»‡c Ä‘á»c thÃ´ng tin (Read) vÃ  tá»± Ä‘á»™ng lÆ°u trá»¯ trong bá»™ nhá»›; tá»± Ä‘á»™ng Ä‘Ã¡nh giÃ¡ cáº¥u trÃºc dá»¯ liá»‡u vÃ  sá»± há»£p lá»‡ cá»§a cÃ¡c dÃ²ng lá»‡nh (Eval); xá»­ lÃ½ thá»±c thi code sau Ä‘Ã³ in ra káº¿t quáº£ náº¿u cÃ³ (Print) vÃ  há»— trá»£ láº·p láº¡i cÃ¡c dÃ²ng lá»‡nh trÃªn Ä‘á»ƒ thá»±c thi chÆ°Æ¡ng trÃ¬nh (Loop).

## ğŸ”· REST API (REpresentational State Transfer)

### HATEOAS (Hypermedia As The Engine Of Application State)
- HATEOAS lÃ  má»™t trong nhá»¯ng chuáº©n Ä‘Æ°á»£c khuyáº¿n nghá»‹ cho RESTful API. Thuáº­t ngá»¯ 'Hypermedia' cÃ³ nghÄ©a lÃ  báº¥t ká»³ ná»™i dung nÃ o cÃ³ chá»©a cÃ¡c liÃªn káº¿t (link) Ä‘áº¿n cÃ¡c media khÃ¡c nhÆ° image, movie vÃ  text.

- Kiá»ƒu kiáº¿n trÃºc nÃ y cho phÃ©p báº¡n sá»­ dá»¥ng cÃ¡c liÃªn káº¿t hypermedia trong ná»™i dung response Ä‘á»ƒ client cÃ³ thá»ƒ tá»± Ä‘á»™ng Ä‘iá»u hÆ°á»›ng Ä‘áº¿n tÃ i nguyÃªn phÃ¹ há»£p báº±ng cÃ¡ch duyá»‡t qua cÃ¡c liÃªn káº¿t hypermedia. NÃ³ tÆ°Æ¡ng tá»± nhÆ° má»™t ngÆ°á»i dÃ¹ng web Ä‘iá»u hÆ°á»›ng qua cÃ¡c trang web báº±ng cÃ¡ch nháº¥p vÃ o cÃ¡c link thÃ­ch há»£p Ä‘á»ƒ chuyá»ƒn Ä‘áº¿n ná»™i dung mong muá»‘n.

- HATEOAS mong muá»‘n phÃ­a client khÃ´ng cáº§n biáº¿t chÃºt nÃ o vá» cáº¥u trÃºc phÃ­a server, client chá»‰ cáº§n request Ä‘áº¿n má»™t URL duy nháº¥t, rá»“i tá»« Ä‘Ã³ má»i Ä‘Æ°á»ng Ä‘i nÆ°á»›c bÆ°á»›c tiáº¿p theo sáº½ do chá»‰ dáº«n cá»§a phÃ­a server tráº£ vá».

    ```JS
    HTTP/1.1 200 OK
    {
        "account": {
            "account_number": 12345,
            "balance": {
                "currency": "usd",
                "value": 100.00
            },
            "links": {
                "deposits": "/accounts/12345/deposits",
                "withdrawals": "/accounts/12345/withdrawals",
                "transfers": "/accounts/12345/transfers",
                "close-requests": "/accounts/12345/close-requests"
            }
        }
    }
    ```
## ğŸ”· Authentication vÃ  Json Web Token (JWT)

- Má»™t JWT gá»“m 3 pháº§n cÆ¡ báº£n:
    + **Header**: chá»©a kiá»ƒu dá»¯ liá»‡u , vÃ  thuáº­t toÃ¡n sá»­ dá»¥ng Ä‘á»ƒ mÃ£ hÃ³a ra chuá»—i JWT
    + **Payload**: chá»©a cÃ¡c thÃ´ng tin mÃ¬nh muá»‘n Ä‘áº·t trong chuá»—i token nhÆ° username, userId, â€¦
    + **Verify signature**: Ä‘Æ°á»£c táº¡o ra báº±ng cÃ¡ch mÃ£ hÃ³a pháº§n header, payload kÃ¨m theo má»™t chuá»—i secret (khÃ³a bÃ­ máº­t)

## ğŸ”· Tip

### Má»™t sá»‘ thÆ° viá»‡n cáº§n thiáº¿t khi táº¡o dá»± Ã¡n (dÃ nh cho dev)
- **dotenv**: cÃ i Ä‘áº·t file mÃ´i trÆ°á»ng (file .env)
    ```
    npm i dotenv
    ```     
    ```JS
    require('dotenv').config()
    const PORT = process.env.PORT
    ```
- **Nodemon**: tá»± Ä‘á»™ng reload láº¡i project khi code cÃ³ sá»± thay Ä‘á»•i
    ```
    npm i nodemon
    ```
    ```JSONC
    // config package.json
    "scripts": {
        "start": "nodemon app.js"
    }
    ```

- **Helmet**: giÃºp báº£o máº­t cÃ¡c á»©ng dá»¥ng Express báº±ng cÃ¡ch Ä‘áº·t tiÃªu Ä‘á» pháº£n há»“i HTTP
    ```
    npm i helmet
    ```
    ```JS
    const helmet = require('helmet')
    app.use(helmet())
    ```

- **morgan**: HTTP request logger middleware dÃ nh cho NodeJS
    ```
    npm i morgan
    ```
    ```JS
    const morgan = require('morgan')
    app.use(morgan('common')) // tiny, dev, ...
    ```

### Config router trÃ¡nh bá»‹ nháº­p sai Ä‘Æ°á»ng dáº«n
- `/ab?cd`: router cÃ³ thá»ƒ cÃ³ chá»©a b hoáº·c khÃ´ng (router `/acd` vÃ  `/abcd` lÃ  giá»‘ng nhau)
- `/ab+cd`: router cÃ³ thá»ƒ chá»©a nhiá»u chá»¯ b (router `/abbbbcd` vÃ  `/abcd` lÃ  giá»‘ng nhau)
- `/ab\*cd`: `/ab` + anything + `cd` (router `/abtrquancd` vÃ  `/abcd` lÃ  giá»‘ng nhau)
- `/a/`: router sá»­ dá»¥ng regex (router `/abc`, `/bca`, `trquan` lÃ  giá»‘ng nhau)
